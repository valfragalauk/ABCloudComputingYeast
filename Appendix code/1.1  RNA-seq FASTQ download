# exported downloaded SRR_Acc_List.txt from local to HPC directory ~/ RNAseq
# converting the accession numbers to sra formatted files using SRA toolkit 

# ------------------------------
# 1) List and load available versions of sra-tools to the environment 
# ------------------------------
module avail sra-tools/3.0.3-gcc-13.2.0
module load sra-tools/3.0.3-gcc-13.2.0

# ------------------------------
#  2) Create output directories 
# ------------------------------
mkdir sra	# .sra downloads will be stored
mkdir fastq	# Directory where FASTQ outputs will be written
# ------------------------------
# 3) Download .sra files using prefetch
# ------------------------------
prefetch --option-file SRR_Acc_List.txt --output-directory sra/ 

# ------------------------------
# 4) Convert downloaded .sra files to FASTQ using fasterq-dump
# ------------------------------
fasterq-dump sra/*/*.sra --split-files --threads 4 -O fastq/

# ------------------------------
# 5) Running quality check on the FASTQ files
# ------------------------------
# running fastqc from the directory where my FASTQ files are (if not specify the path to the FASTQ files/direcotry)
module load fastqc
fastqc *.fastq -o /scratch/grp/msc_appbio/Group2_ABCC/RNAseq/trial/QC

# *.fastq runs FastQC on all FASTQ files in the current directory.
# -O Specifies the output directory where FastQC results will be written.
# Output: For each FASTQ file, FastQC generates:
#  an HTML report (<sample_number>_fastqc.html),
#  a compressed results archive (<sample_number>_fastqc.zip).
